<?php
/**
 * Group Grade Base
 */

function groupgrade_menu() {
  // Parent Level Menu
  // My Tasks/Classes/Assignment
  $items['class'] = array(
    // The title - do NOT use t() as t() is called automatically.
    'title' => 'CLASS Management',
    'description' => 'Manage Web Services',
    'page callback' => 'drupal_get_form',
    'page arguments' => array('groupgrade_base'),
    'file' => 'groupgrade_form.inc',
    'file path' => drupal_get_path('module', 'groupgrade'),
    
    // Permissions
    'access callback' => 'groupgrade_custom_access',
    'access arguments' => array('authenticated user'),
  );

  // Default Parent Task
  // /class/
  $items['class/default'] = array(
    'type' => MENU_DEFAULT_LOCAL_TASK,
    'title' => t('My Tasks'),
    'weight' => 1,
  );

  foreach ([t('classes') => 2, t('assignments') => 3] as $tabname => $weight) {
    $items['class/'.$tabname] = array(
      'type' => MENU_LOCAL_TASK,
      'title' => ucfirst($tabname),
      'page callback' => '_menu_example_menu_page',
      'page arguments' => array(t('This is the tab "@tabname" in the "basic tabs" example', array('@tabname' => $tabname))),
      'access callback' => TRUE,

    // The weight property overrides the default alphabetic ordering of menu
    // entries, allowing us to get our tabs in the order we want.
      'weight' => $weight,
    );
  }

  // Secondary tabs on a per-parent tab basis
  $items['class/default/first'] = array(
    'type' => MENU_DEFAULT_LOCAL_TASK,
    'title' => t('Pending'),
    // The additional page callback and related items are handled by the
    // parent menu item.
    'weight' => 1,
  );

  $items["class/default/completed"] = array(
    'type' => MENU_LOCAL_TASK,
    'title' => 'Completed',
    'page callback' => '_menu_example_menu_page',
    'page arguments' => array(t('Apples')),
    'access callback' => TRUE,
     'weight' => 2,
  );

  $items["class/default/all"] = array(
    'type' => MENU_LOCAL_TASK,
    'title' => 'All',
    'page callback' => '_menu_example_menu_page',
    'page arguments' => array(t('Apples')),
    'access callback' => TRUE,
     'weight' => 3,
  );

  // Classes
  $items['class/classes/first'] = array(
    'type' => MENU_DEFAULT_LOCAL_TASK,
    'title' => 'Current Classes',
    // The additional page callback and related items are handled by the
    // parent menu item.
  );

  $items["class/classes/past"] = array(
    'type' => MENU_LOCAL_TASK,
    'title' => 'Past Classes',
    'page callback' => '_menu_example_menu_page',
    'page arguments' => array(t('Apples')),
    'access callback' => TRUE,
  );
  return $items;
}

/**
 * Register the Namespaces
 * 
 * @param object
 * @access private
 */
function groupgrade_xautoload($api)
{
  $api->namespaceRoot('Drupal\\ClassLearning');
}

/**
 * Determine whether the current user has the role specified.
 *
 * @param $role_name
 *   The role required for access
 * @return bool
 *   True if the acting user has the role specified.
 */
function groupgrade_custom_access($role_name){
  $access_granted = in_array($role_name, $GLOBALS['user']->roles);
  return $access_granted;
}
